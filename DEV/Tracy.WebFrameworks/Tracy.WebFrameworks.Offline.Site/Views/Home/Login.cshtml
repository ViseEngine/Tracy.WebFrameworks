@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    @Styles.Render("~/Content/site")
    @Styles.Render("~/Content/easyui/default")
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/easyui")
    @Scripts.Render("~/bundles/jqueryform")

    <title>登录</title>
</head>
<body>
    <div id="win" class="easyui-window" title="欢迎访问web框架,请登录!"
         data-options="modal:true,closable:false,collapsible:false,minimizable:false,maximizable:false">
        <form id="LoginForm" action="@Url.Action("CheckLogin", "Home")" method="post">
            <table id="LoginTable">
                <tr>
                    <td>
                        <label for="LoginName">用户名:</label>
                    </td>
                    <td>
                        <input type="text" id="LoginName" name="LoginName" value="@ViewBag.LoginName" />
                    </td>
                    <td>
                </tr>
                <tr>
                    <td>
                        <label for="Password">密  码:</label>
                    </td>
                    <td>
                        <input type="text" id="Password" name="Password" />
                    </td>
                </tr>
                @*<tr>
                        <td>
                            <label for="VerificationCode">验证码:</label>
                        </td>
                        <td>
                            <input type="text" id="VerificationCode" name="VerificationCode" />
                        </td>
                    </tr>*@
                <tr>
                    <td colspan="2">
                        <input type="button" id="btnSubmit" name="btnSubmit" value="确 定" />&nbsp;&nbsp;&nbsp;&nbsp;
                        <input type="button" id="btnReset" name="btnReset" value="重 置" />
                    </td>
                </tr>
            </table>
        </form>
    </div>

    @if (false)
    {
        <script type="text/javascript" src="~/Scripts/jquery-1.8.2.js"></script>
    }

    <script type="text/javascript">
        $(function () {
            //ajax提交表单
            $("#btnSubmit").click(function () {
                //校验
                if (Check()) {
                    return;
                }

                //提交表单
                $('form').ajaxSubmit({
                    success: function (responseText) {
                        if (responseText.Success) {
                            window.location.href = "@Url.Action("Index","Home")";
                        }
                        else {
                            alert(responseText.Message);
                            window.location.href = "@Url.Action("Login","Home")";
                        }
                    },
                    error: function (xhr, error, ex) {
                        alert("出现错误，请稍后再试，带来不便，敬请谅解");
                        //window.location.href = "/Login/Login/";
                    }
                });
            });


        });

        //校验
        function Check() {
            var loginName = $("#LoginName").val();
            var password = $("#Password").val();
            if (loginName== undefined || loginName=="") {
                alert("请输入用户名!");
                return true;
            }
            if (password== undefined || password== "") {
                alert("请输入密码!");
                return true;
            }

            return false;
        }

    </script>
</body>
</html>
